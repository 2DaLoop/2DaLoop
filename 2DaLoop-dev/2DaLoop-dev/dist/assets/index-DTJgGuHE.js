(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const E={"#/":{page:"src/pages/home.html",script:"src/scripts/home.js"},"#/nearby-facilities":{page:"src/pages/nearby-facilities.html",script:"src/scripts/nearby-facilities.js"},"#/asset-submission":{page:"src/pages/asset-submission.html",script:"src/scripts/asset-submission.js"},"#/dashboard":{page:"src/pages/dashboard.html",script:"src/scripts/dashboard.js"},"#/help":{page:"src/pages/help.html",script:"src/scripts/help.js"},"#/faq":{page:"src/pages/faq.html",script:"src/scripts/faq.js"}},f=document.querySelector("#app");let g=location.hash||"#/";const y=async s=>{try{const e=E[s];if(!e)throw new Error("Route not found");const o=await fetch(`${e.page}?t=${Date.now()}`);if(!o.ok)throw new Error(`Error loading ${e.filePath}: ${o.statusText}`);const c=await o.text();f.innerHTML=c;const t=document.querySelector("script[data-route-script]");if(t&&t.remove(),e.script){const r=document.createElement("script");r.type="module",r.src=`${e.script}?t=${Date.now()}`,r.setAttribute("data-route-script","true"),document.body.appendChild(r)}}catch(e){console.error(e),f.innerHTML="<p>Error loading content.</p>"}};window.addEventListener("hashchange",async()=>{const s=location.hash||"#/";s!==g&&(g=s,y(s))});const L=async()=>{const s=location.hash||"#/";y(s)};function S(){const s=document.getElementById("sidebar");s&&fetch("src/components/sidebar.html").then(e=>e.text()).then(e=>{s.innerHTML=e})}const P=import.meta.env.VITE_API_KEY;(s=>{var e,o,c,t="The Google Maps JavaScript API",r="google",n="importLibrary",m="__ib__",d=document,i=window;i=i[r]||(i[r]={});var a=i.maps||(i.maps={}),h=new Set,p=new URLSearchParams,b=()=>e||(e=new Promise(async(l,u)=>{await(o=d.createElement("script")),p.set("libraries",[...h]+"");for(c in s)p.set(c.replace(/[A-Z]/g,w=>"_"+w[0].toLowerCase()),s[c]);p.set("callback",r+".maps."+m),o.src=`https://maps.${r}apis.com/maps/api/js?`+p,a[m]=l,o.onerror=()=>e=u(Error(t+" could not load.")),o.nonce=d.querySelector("script[nonce]")?.nonce||"",d.head.append(o)}));a[n]?console.warn(t+" only loads once. Ignoring:",s):a[n]=(l,...u)=>h.add(l)&&b().then(()=>a[n](l,...u))})({key:P,v:"weekly"});S();L();if(!localStorage.getItem("cookieAccepted")){const s=document.getElementById("cookie-popup");s&&(s.classList.remove("hidden"),fetch("src/components/cookie-popup.html").then(e=>e.text()).then(e=>{s.innerHTML=e;const o=document.createElement("script");o.src="src/components/cookie-popup.js",document.body.appendChild(o)}))}
